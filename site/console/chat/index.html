<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>LumenCore™ Console Chat</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Inter',sans-serif;background:#05070b;color:#e0e0e0;margin:0;padding:0;display:flex;flex-direction:column;height:100vh;}
header{background:linear-gradient(90deg,#00ffd0,#0066ff);padding:1rem;text-align:center;color:#000;font-weight:700;}
#chatbox{flex:1;overflow-y:auto;padding:1rem;}
.message{margin:.5rem 0;}
.user{color:#00ffd0;}
.ai{color:#ffaa00;}
#inputbar{display:flex;padding:1rem;border-top:1px solid #222;}
#input{flex:1;padding:.5rem;border:none;border-radius:5px;}
button{background:#0066ff;border:none;padding:.5rem 1rem;color:white;border-radius:5px;margin-left:.5rem;}
</style>
</head>
<body>
<header>⚡ LumenCore™ Console Chat</header>
<div id="chatbox"></div>
<div id="inputbar">
<input id="input" type="text" placeholder="Ask about metrics or performance..." autocomplete="off"/>
<button onclick="send()">Send</button>
</div>

<script>
async function query(msg){
  try{
    if(msg.toLowerCase().includes("metric")||msg.toLowerCase().includes("speed")){
      const r=await fetch("/api/metrics",{cache:"no-store"});
      const j=await r.json();
      return `Average speedup: ${j.avg_speedup||0}×, Max: ${j.max_speedup||0}×, Thermal gain: ${j.thermal_gain_pct||0}%`;
    }
    if(msg.toLowerCase().includes("help")){
      return "You can ask me about current metrics, speed, or efficiency.";
    }
    return "I'm connected to LumenCore's metrics API. Try: 'Show me the latest metrics'.";
  }catch(e){return "⚠️ Couldn't reach metrics API.";}
}
async function send(){
  const box=document.getElementById("chatbox");
  const input=document.getElementById("input");
  const msg=input.value.trim();
  if(!msg)return;
  box.innerHTML+=`<div class='message user'><b>You:</b> ${msg}</div>`;
  input.value="";
  const reply=await query(msg);
  box.innerHTML+=`<div class='message ai'><b>Luma:</b> ${reply}</div>`;
  box.scrollTop=box.scrollHeight;
}
document.getElementById("input").addEventListener("keydown",e=>{if(e.key==="Enter")send();});
</script>
</body>
</html>
